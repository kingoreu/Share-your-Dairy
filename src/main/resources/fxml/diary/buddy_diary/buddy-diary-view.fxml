<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.share.dairy.controller.BuddyDiaryController"
            prefWidth="700" prefHeight="560"
            style="-fx-background-color: transparent;">

    <HBox spacing="12"
          AnchorPane.topAnchor="0"
          AnchorPane.leftAnchor="0"
          AnchorPane.rightAnchor="0"
          AnchorPane.bottomAnchor="0">

        <!-- 좌측: 친구 리스트 (폭 고정) -->
        <StackPane prefWidth="240" minWidth="240" maxWidth="240"
                   style="-fx-background-color:#E9CFE5; -fx-background-radius:16; -fx-padding:10;"
                   VBox.vgrow="ALWAYS">
            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                        style="-fx-background-color: transparent;"
                        maxHeight="Infinity" VBox.vgrow="ALWAYS">
                <VBox fx:id="buddyList" spacing="10" style="-fx-padding:6;"
                      maxHeight="Infinity" VBox.vgrow="ALWAYS"/>
            </ScrollPane>
        </StackPane>

        <!-- 우측: 2×2 카드 -->
        <!-- ✅ 세로도 뷰포트에 맞춰 늘어나게 fitToHeight 추가 -->
        <ScrollPane fitToWidth="true" fitToHeight="true"
                    hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                    style="-fx-background-color: transparent;" HBox.hgrow="ALWAYS">
            <AnchorPane style="-fx-background-color:#F3EFF2; -fx-background-radius:12;">
                
                <!-- 2×2 카드 그리드 (영역을 꽉 채우도록 확장) -->
                <GridPane fx:id="entriesGrid"
                          hgap="24" vgap="24" alignment="CENTER"
                          AnchorPane.topAnchor="18" AnchorPane.leftAnchor="18"
                          AnchorPane.rightAnchor="18" AnchorPane.bottomAnchor="18">

                    <!-- 가로 50% / 50% + 폭 채우기 -->
                    <columnConstraints>
                        <ColumnConstraints percentWidth="50" hgrow="ALWAYS" fillWidth="true" halignment="CENTER"/>
                        <ColumnConstraints percentWidth="50" hgrow="ALWAYS" fillWidth="true" halignment="CENTER"/>
                    </columnConstraints>

                    <!-- 세로 50% / 50% + 높이 채우기 (최소 높이 보장) -->
                    <rowConstraints>
                        <RowConstraints percentHeight="50" vgrow="ALWAYS" fillHeight="true"
                                        minHeight="200" prefHeight="240" valignment="CENTER"/>
                        <RowConstraints percentHeight="50" vgrow="ALWAYS" fillHeight="true"
                                        minHeight="200" prefHeight="240" valignment="CENTER"/>
                    </rowConstraints>

                    <!-- 카드 4개: 셀 공간을 꽉 채움 -->
                    <StackPane fx:id="buddyCard1" styleClass="buddy-card"
                               minWidth="200" minHeight="220"
                               maxWidth="Infinity" maxHeight="Infinity"
                               GridPane.columnIndex="0" GridPane.rowIndex="0"
                               GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"/>

                    <StackPane fx:id="buddyCard2" styleClass="buddy-card"
                               minWidth="200" minHeight="220"
                               maxWidth="Infinity" maxHeight="Infinity"
                               GridPane.columnIndex="1" GridPane.rowIndex="0"
                               GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"/>

                    <StackPane fx:id="buddyCard3" styleClass="buddy-card"
                               minWidth="200" minHeight="220"
                               maxWidth="Infinity" maxHeight="Infinity"
                               GridPane.columnIndex="0" GridPane.rowIndex="1"
                               GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"/>

                    <StackPane fx:id="buddyCard4" styleClass="buddy-card"
                               minWidth="200" minHeight="220"
                               maxWidth="Infinity" maxHeight="Infinity"
                               GridPane.columnIndex="1" GridPane.rowIndex="1"
                               GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS"/>

                </GridPane>
            </AnchorPane>
        </ScrollPane>
    </HBox>
</AnchorPane>
